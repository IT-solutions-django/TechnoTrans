function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var N=(typeof HTMLElement>"u"?"undefined":c(HTMLElement))==="object",B="u">typeof ShadowRoot;function O(t){return!!(B&&t instanceof ShadowRoot)||(N?t instanceof HTMLElement:t&&"object"===c(t)&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName)}function o(t,e){e.forEach(function(e){t.classList.add(e)})}function u(t,e){e.forEach(function(e){t.classList.remove(e)})}var W="@keyframes lum-noop{0%{zoom:1}}.lum-lightbox{position:fixed;display:none;top:0;right:0;bottom:0;left:0}.lum-lightbox.lum-open{display:block}.lum-lightbox.lum-closing,.lum-lightbox.lum-opening{animation:lum-noop 1ms}.lum-lightbox-inner{position:absolute;top:0;right:0;bottom:0;left:0;overflow:hidden}.lum-lightbox-loader{display:none}.lum-lightbox-inner img{max-width:100%;max-height:100%}.lum-lightbox-image-wrapper{vertical-align:middle;display:table-cell;text-align:center}";function A(t){if(t&&t!==document||(t=document.head),!t.querySelector(".lum-base-styles")){var e=document.createElement("style");e.type="text/css",e.classList.add("lum-base-styles"),e.appendChild(document.createTextNode(W)),t.insertBefore(e,t.firstChild)}}function L(){throw Error("Missing parameter")}function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function R(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function H(t,e,i){return e&&R(t.prototype,e),t}var P=37,z=39,S=!(typeof document>"u")&&"animation"in document.createElement("div").style,K=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};$(this,t),this._sizeImgWrapperEl=this._sizeImgWrapperEl.bind(this),this.showNext=this.showNext.bind(this),this.showPrevious=this.showPrevious.bind(this),this._completeOpen=this._completeOpen.bind(this),this._completeClose=this._completeClose.bind(this),this._handleKeydown=this._handleKeydown.bind(this),this._handleClose=this._handleClose.bind(this);var i=e.namespace,s=e.parentEl,n=void 0===s?L():s,l=e.triggerEl,r=void 0===l?L():l,h=e.sourceAttribute,g=void 0===h?L():h,p=e.caption,d=e.includeImgixJSClass,m=e._gallery,y=e._arrowNavigation,f=e.closeButtonEnabled,E=e.closeTrigger;if(this.settings={namespace:void 0===i?null:i,parentEl:n,triggerEl:r,sourceAttribute:g,caption:void 0===p?null:p,includeImgixJSClass:void 0!==d&&d,_gallery:void 0===m?null:m,_arrowNavigation:void 0===y?null:y,closeButtonEnabled:void 0===f||f,onClose:e.onClose,closeTrigger:void 0===E?"click":E},!O(this.settings.parentEl))throw TypeError("`new Lightbox` requires a DOM element passed as `parentEl`.");this.currentTrigger=this.settings.triggerEl,this.openClasses=this._buildClasses("open"),this.openingClasses=this._buildClasses("opening"),this.closingClasses=this._buildClasses("closing"),this.hasBeenLoaded=!1,this.elementBuilt=!1}return H(t,[{key:"_handleClose",value:function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault();var e=this.settings.onClose;e&&"function"==typeof e&&e()}},{key:"_bindEventListeners",value:function(){this.el.addEventListener(this.settings.closeTrigger,this._handleClose),this.closeButtonEl&&this.closeButtonEl.addEventListener("click",this._handleClose)}},{key:"_buildClasses",value:function(t){var e=["lum-".concat(t)],i=this.settings.namespace;return i&&e.push("".concat(i,"-").concat(t)),e}},{key:"_buildElement",value:function(){this.el=document.createElement("div"),o(this.el,this._buildClasses("lightbox")),this.innerEl=document.createElement("div"),o(this.innerEl,this._buildClasses("lightbox-inner")),this.el.appendChild(this.innerEl);var t=document.createElement("div");o(t,this._buildClasses("lightbox-loader")),this.innerEl.appendChild(t),this.imgWrapperEl=document.createElement("div"),o(this.imgWrapperEl,this._buildClasses("lightbox-image-wrapper")),this.innerEl.appendChild(this.imgWrapperEl);var e=document.createElement("span");o(e,this._buildClasses("lightbox-position-helper")),this.imgWrapperEl.appendChild(e),this.imgEl=document.createElement("img"),o(this.imgEl,this._buildClasses("img")),e.appendChild(this.imgEl),this.captionEl=document.createElement("p"),o(this.captionEl,this._buildClasses("lightbox-caption")),e.appendChild(this.captionEl),this.settings.closeButtonEnabled&&(this.closeButtonEl=document.createElement("div"),o(this.closeButtonEl,this._buildClasses("close-button")),this.el.appendChild(this.closeButtonEl)),this.settings._gallery&&this._setUpGalleryElements(),this.settings.parentEl.appendChild(this.el),this._updateImgSrc(),this._updateCaption(),this.settings.includeImgixJSClass&&this.imgEl.classList.add("imgix-fluid")}},{key:"_setUpGalleryElements",value:function(){this._buildGalleryButton("previous",this.showPrevious),this._buildGalleryButton("next",this.showNext)}},{key:"_buildGalleryButton",value:function(t,e){var i=document.createElement("button");this["".concat(t,"Button")]=i,i.innerText=t,o(i,this._buildClasses("".concat(t,"-button"))),o(i,this._buildClasses("gallery-button")),this.innerEl.appendChild(i),i.addEventListener("click",function(t){t.stopPropagation(),e()},!1)}},{key:"_sizeImgWrapperEl",value:function(){var t=this.imgWrapperEl.style;t.width="".concat(this.innerEl.clientWidth,"px"),t.maxWidth="".concat(this.innerEl.clientWidth,"px"),t.height="".concat(this.innerEl.clientHeight-this.captionEl.clientHeight,"px"),t.maxHeight="".concat(this.innerEl.clientHeight-this.captionEl.clientHeight,"px")}},{key:"_updateCaption",value:function(){var t=v(this.settings.caption),e="";"string"===t?e=this.settings.caption:"function"===t&&(e=this.settings.caption(this.currentTrigger)),this.captionEl.innerHTML=e}},{key:"_updateImgSrc",value:function(){var t=this,e=this.currentTrigger.getAttribute(this.settings.sourceAttribute);if(!e)throw Error("No image URL was found in the ".concat(this.settings.sourceAttribute," attribute of the trigger."));var i=this._buildClasses("loading");this.hasBeenLoaded||o(this.el,i),this.imgEl.onload=function(){u(t.el,i),t.hasBeenLoaded=!0},this.imgEl.setAttribute("src",e)}},{key:"_handleKeydown",value:function(t){t.keyCode==P?this.showPrevious():t.keyCode==z&&this.showNext()}},{key:"showNext",value:function(){this.settings._gallery&&(this.currentTrigger=this.settings._gallery.nextTrigger(this.currentTrigger),this._updateImgSrc(),this._updateCaption(),this._sizeImgWrapperEl(),this.settings._gallery.onChange({imgEl:this.imgEl}))}},{key:"showPrevious",value:function(){this.settings._gallery&&(this.currentTrigger=this.settings._gallery.previousTrigger(this.currentTrigger),this._updateImgSrc(),this._updateCaption(),this._sizeImgWrapperEl(),this.settings._gallery.onChange({imgEl:this.imgEl}))}},{key:"open",value:function(){this.elementBuilt||(this._buildElement(),this._bindEventListeners(),this.elementBuilt=!0),this.currentTrigger=this.settings.triggerEl,this._updateImgSrc(),this._updateCaption(),o(this.el,this.openClasses),this._sizeImgWrapperEl(),window.addEventListener("resize",this._sizeImgWrapperEl,!1),this.settings._arrowNavigation&&window.addEventListener("keydown",this._handleKeydown,!1),S&&(this.el.addEventListener("animationend",this._completeOpen,!1),o(this.el,this.openingClasses))}},{key:"close",value:function(){window.removeEventListener("resize",this._sizeImgWrapperEl,!1),this.settings._arrowNavigation&&window.removeEventListener("keydown",this._handleKeydown,!1),S?(this.el.addEventListener("animationend",this._completeClose,!1),o(this.el,this.closingClasses)):u(this.el,this.openClasses)}},{key:"_completeOpen",value:function(){this.el.removeEventListener("animationend",this._completeOpen,!1),u(this.el,this.openingClasses)}},{key:"_completeClose",value:function(){this.el.removeEventListener("animationend",this._completeClose,!1),u(this.el,this.openClasses),u(this.el,this.closingClasses)}},{key:"destroy",value:function(){this.el&&this.settings.parentEl.removeChild(this.el)}}]),t}();function M(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function D(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function G(t,e,i){return e&&D(t.prototype,e),t}var a=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(M(this,t),this.VERSION="2.3.5",this.destroy=this.destroy.bind(this),this.open=this.open.bind(this),this.close=this.close.bind(this),this._handleKeyup=this._handleKeyup.bind(this),this.isOpen=!1,this.trigger=e,!O(this.trigger))throw TypeError("`new Luminous` requires a DOM element as its first argument.");var s=document;"getRootNode"in this.trigger&&(s=this.trigger.getRootNode());var n=i.namespace||null,l=i.sourceAttribute||"href",r=i.caption||null,h=i.openTrigger||"click",g=i.closeTrigger||"click",p=!("closeWithEscape"in i)||!!i.closeWithEscape,d=i.closeOnScroll||!1,m=null==i.showCloseButton||i.showCloseButton,y=i.appendToNode||(s===document?document.body:s),f=i.appendToSelector||null,E=i.onOpen||null,b=i.onClose||null,C=i.includeImgixJSClass||!1,x=!("injectBaseStyles"in i)||!!i.injectBaseStyles,w=i._gallery||null,_=i._arrowNavigation||null;this.settings={namespace:n,sourceAttribute:l,caption:r,openTrigger:h,closeTrigger:g,closeWithEscape:p,closeOnScroll:d,closeButtonEnabled:m,appendToNode:y,appendToSelector:f,onOpen:E,onClose:b,includeImgixJSClass:C,injectBaseStyles:x,_gallery:w,_arrowNavigation:_};var T=document.body;y&&"getRootNode"in y&&(T=y.getRootNode()),this.settings.injectBaseStyles&&A(T),this._buildLightbox(),this._bindEventListeners()}return G(t,[{key:"open",value:function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault(),this.lightbox.open(),this.settings.closeOnScroll&&window.addEventListener("scroll",this.close,!1);var e=this.settings.onOpen;e&&"function"==typeof e&&e(),this.isOpen=!0}},{key:"close",value:function(t){this.settings.closeOnScroll&&window.removeEventListener("scroll",this.close,!1),this.lightbox.close();var e=this.settings.onClose;e&&"function"==typeof e&&e(),this.isOpen=!1}},{key:"_buildLightbox",value:function(){var t=this.settings.appendToNode;this.settings.appendToSelector&&(t=document.querySelector(this.settings.appendToSelector)),this.lightbox=new K({namespace:this.settings.namespace,parentEl:t,triggerEl:this.trigger,sourceAttribute:this.settings.sourceAttribute,caption:this.settings.caption,includeImgixJSClass:this.settings.includeImgixJSClass,closeButtonEnabled:this.settings.closeButtonEnabled,_gallery:this.settings._gallery,_arrowNavigation:this.settings._arrowNavigation,closeTrigger:this.settings.closeTrigger,onClose:this.close})}},{key:"_bindEventListeners",value:function(){this.trigger.addEventListener(this.settings.openTrigger,this.open,!1),this.settings.closeWithEscape&&window.addEventListener("keyup",this._handleKeyup,!1)}},{key:"_unbindEvents",value:function(){this.trigger.removeEventListener(this.settings.openTrigger,this.open,!1),this.lightbox.el&&this.lightbox.el.removeEventListener(this.settings.closeTrigger,this.close,!1),this.settings.closeWithEscape&&window.removeEventListener("keyup",this._handleKeyup,!1)}},{key:"_handleKeyup",value:function(t){this.isOpen&&27===t.keyCode&&this.close()}},{key:"destroy",value:function(){this._unbindEvents(),this.lightbox.destroy()}}]),t}();function J(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function U(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function q(t,e,i){return e&&U(t.prototype,e),t}a.prototype.open=a.prototype.open,a.prototype.close=a.prototype.close,a.prototype.destroy=a.prototype.destroy;var k=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};J(this,t),this.settings=Object.assign({},{arrowNavigation:!0,onChange:null},i),this.triggers=e,this.luminousOpts=s,this.luminousOpts._gallery=this,this.luminousOpts._arrowNavigation=this.settings.arrowNavigation,this._constructLuminousInstances()}return q(t,[{key:"_constructLuminousInstances",value:function(){this.luminousInstances=[];for(var t=this.triggers.length,e=0;e<t;e++){var i=this.triggers[e],s=new a(i,this.luminousOpts);this.luminousInstances.push(s)}}},{key:"nextTrigger",value:function(t){var e=Array.prototype.indexOf.call(this.triggers,t)+1;return e>=this.triggers.length?this.triggers[0]:this.triggers[e]}},{key:"previousTrigger",value:function(t){var e=Array.prototype.indexOf.call(this.triggers,t)-1;return e<0?this.triggers[this.triggers.length-1]:this.triggers[e]}},{key:"onChange",value:function(t){var e=t.imgEl,i=this.settings.onChange;i&&"function"==typeof i&&i({imgEl:e})}},{key:"destroy",value:function(){this.luminousInstances.forEach(function(t){return t.destroy()})}}]),t}();k.prototype.destroy=k.prototype.destroy;export{k as L};